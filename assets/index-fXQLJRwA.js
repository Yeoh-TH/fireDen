(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function p(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(e){if(e.ep)return;e.ep=!0;const r=p(e);fetch(e.href,r)}})();var t=require("@google/earthengine");function V(){var O=require("./.private-key.json"),n=function(){t.initialize(null,null,function(){},function(a){console.error("Initialization error: "+a)})};t.data.authenticateViaPrivateKey(O,n,function(a){console.error("Authentication error: "+a)}),t.data.authenticateViaPrivateKey(AIzaSyCygLKhPAmV_9hENXOMZm_5uYnJ3kYFalE),t.initialize();var p=t.Geometry.Point([23.475629,38.062403]),c=t.FeatureCollection("FAO/GAUL_SIMPLIFIED_500m/2015/level1"),e=c.filterBounds(p);Map.centerObject(e,7),Map.setOptions("HYBRID"),Map.addLayer(e,{},"selected admin unit");var r=t.ImageCollection("COPERNICUS/S5P/OFFL/L3_NO2"),o=t.ImageCollection("COPERNICUS/S5P/OFFL/L3_CO"),b=t.ImageCollection("COPERNICUS/S5P/OFFL/L3_AER_AI");function A(a){var d=a.select("cloud_fraction"),i=d.lte(.3);return a.updateMask(i).copyProperties(a)}var l=r.filterBounds(e).map(A).select("tropospheric_NO2_column_number_density"),f=o.filterBounds(e).select("CO_column_number_density"),y=b.filterBounds(e).select("absorbing_aerosol_index"),I=l.filterDate("2022-07-01","2022-08-01").median(),P=f.filterDate("2022-07-01","2022-08-01").median(),_=y.filterDate("2022-07-01","2022-08-01").median(),D=I.clipToCollection(e),w=P.clipToCollection(e),B=_.clipToCollection(e),m={min:0,max:2e-4,palette:["black","blue","purple","cyan","green","yellow","red"]},v={min:0,max:.05,palette:["black","blue","purple","cyan","green","yellow","red"]},g={min:-1,max:2,palette:["black","blue","purple","cyan","green","yellow","red"]};Map.addLayer(D,m,"median no2 July 2022"),Map.addLayer(w,v,"median co July 2022"),Map.addLayer(B,g,"median AAI July 2022");var F=l.filterDate("2023-07-17","2023-07-20").median().clipToCollection(e),N=f.filterDate("2023-07-17","2023-07-20").median().clipToCollection(e),R=y.filterDate("2023-07-09","2023-07-10").median().clipToCollection(e),S=l.filterDate("2023-06-01","2023-07-01").median().clipToCollection(e),z=f.filterDate("2023-06-01","2023-07-01").median().clipToCollection(e),T=y.filterDate("2022-07-01","2022-08-01").median().clipToCollection(e),u=ui.Map().centerObject(e,7).setOptions("HYBRID"),s=ui.Map().setOptions("HYBRID"),Y=ui.SplitPanel({firstPanel:u,secondPanel:s,orientation:"horizontal",wipe:!0,style:{stretch:"both"}});ui.Map.Linker([u,s]);function M(a,d){var i=ui.Label({value:a,style:{fontSize:"16px",color:"#ffffff",fontWeight:"bold",backgroundColor:"#ffffff00",padding:"0px"}}),L=ui.Panel({widgets:[i],layout:ui.Panel.Layout.flow("horizontal"),style:{position:d,backgroundColor:"#00000057",padding:"0px"}});return L}var E=ui.Map.Layer(S,m);ui.Map.Layer(z,v),ui.Map.Layer(T,g),u.layers().reset([E]),u.add(M("Baseline 2022 July","top-left"));var J=ui.Map.Layer(F,m);ui.Map.Layer(N,v),ui.Map.Layer(R,g),s.layers().reset([J]),s.add(M("Wildfire 2023 July","top-right")),ui.root.widgets().reset([Y]);function h(a,d){return function(i){var L=i.reduceRegion({reducer:t.Reducer.mean(),geometry:e.geometry(),scale:1e3}).get("tropospheric_NO2_column_number_density"),k=i.date().getRelative("day","year");return t.Feature(null,{conc:L,DOY:k,type:a})}}var C=l.filterDate("2023-07-01","2023-08-01").map(h("wildfire")).merge(l.filterDate("2022-07-01","2022-08-01").map(h("baseline")));C=C.filter(t.Filter.notNull(["conc"]));var x=ui.Chart.feature.groups(C,"DOY","conc","type").setChartType("LineChart").setOptions({title:"DOY time series for mean [NO2] during July 2022 (baseline) and July 2023 (wildfire)"});print("Baseline vs wildfire NO2 for the study region by DOY",x)}V();
